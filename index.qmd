---
title: "The Effects of Wildfires on Bird Migration Routes"
---

```{r}
#| echo: false
#| warning: false
#| message: false
library(tidyverse)
library(data.table)
library(sf)
library(caret)
library(randomForest)
library(ranger)
library(rnaturalearth)
library(rnaturalearthdata)
```

```{r}
#| echo: false
#| warning: false
#| message: false

# plot bird migration tracks, and wildfires between 2013_07_14_to_2014_05_30
# Read datasets
wildfires <- read.csv("data/wildfires_to_plot.csv")
birds <- read.csv("data/bird_migration.csv")

# Preprocess wildfire data
# Remove rows with missing coordinates
wildfires <- wildfires %>%
  filter(!is.na(Longitude) & !is.na(Latitude)) %>%
  mutate(
    Longitude = as.numeric(Longitude),
    Latitude = as.numeric(Latitude)
  )

# Preprocess bird data
birds$date_time <- as.POSIXct(birds$date_time, format="%Y-%m-%d %H:%M:%S", tz="UTC")

birds <- birds %>%
  filter(!is.na(longitude) & !is.na(latitude)) %>%
  mutate(
    longitude = as.numeric(longitude),
    latitude = as.numeric(latitude)
  )

# Plot bird tracks + all wildfires
world <- ne_countries(scale = "medium", returnclass = "sf")

# Plot
ggplot() +
  # Background world map
  geom_sf(data = world, fill = "gray95", color = "gray70") +
  
  # Bird migration paths
  geom_path(data = birds, aes(x = longitude, y = latitude, color = bird_name, group = bird_name),
            size = 1) +
  
  # Wildfire locations
  geom_point(data = wildfires, aes(x = Longitude, y = Latitude),
             color = "red", alpha = 0.4, size = 1) +
  
  labs(
    title = "Migratory birds and wildfires within 100 miles during the whole migration period",
    x = "Longitude", y = "Latitude", color = "Bird"
  ) +
  coord_sf(
    xlim = c(-40, 40),
    ylim = c(10, 60)
  ) +
  theme_minimal()
```

# Summary
Wildfires have been affecting migratory routes of birds. I downloaded two datasets from Kaggle about gull migration and global wildfires. We want to understand the relationship between fire proximity and other variables such as speed, altitude, and direction. The outcome modeled is wildfire proximity, a numeric variable, as a linear function. Birds with higher proximity to fires correlate to have a higher degrees counterclockwise from the east. For each one-degree counterclockwise increase in direction relative to the east, the model predicts that the distance to the nearest wildfire decreases by approximately 0.059 miles with a 95% confidence interval ranging from -0.096 to -0.021.
